<h1>Histórico das Avaliações</h1>

<div *ngIf="isAuthorized">
  <select class="form-select" name="selectUsuario" id="select-usuario" #usuarioSelect (change)="getHistoricoAvaliacoes(usuarioSelect.value)">
    <option disabled selected value="">Selecione um Funcionário</option>
    <option *ngFor="let user of users" [value]="user.name">{{ user.name }}</option>
  </select>
</div>

<div *ngFor="let avaliacao of historicoAvaliacoes">
  <p>Avaliado por: {{ avaliacao.avaliador }}</p>
  <p>Data: {{ avaliacao.dataFormatada }}</p>
  <p>Nota Individual: {{ avaliacao.mediaIndividual }}</p>
  <p>Nota do Time: {{ avaliacao.mediaTime }}</p>
  <p>Nota da Empresa: {{ avaliacao.mediaEmpresa }}</p>
  <p class="nota-final">Média Final: {{ avaliacao.mediaFinalGeral }}</p>
  <p>
    <span class="performance-prata" *ngIf="avaliacao.mediaFinalGeral <= 7">Performance: Prata</span>
    <span class="performance-ouro" *ngIf="avaliacao.medimediaFinalGeralaFinal > 7 && avaliacao.mediaFinal <= 9">Performance: Ouro</span>
    <span class="performance-diamante" *ngIf="avaliacao.mediaFinalGeral > 9">Performance: Diamante</span>
  </p>
  <div>
    <ul>
      <li *ngFor="let item of avaliacao.itens">
        {{ item.nome }}: {{ item.nota }}
      </li>
    </ul>
    <button (click)="downloadRelatorio(avaliacao)">Baixar Relatório</button>
  </div>
  <hr>
</div>
